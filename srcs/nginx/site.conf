server {
    listen 80;
    listen [::]:80;
    server_name localhost;
    return 301 https://$server_name$request_uri;
}

server {
	listen 443 ssl;
	listen [::]:443 ssl;
	server_name localhost;

	root /var/www/html/;
	index index.php index.html;

	ssl_certificate /root/.local/share/mkcert/rootCA.pem;
	ssl_certificate_key /root/.local/share/mkcert/rootCA-key.pem;

	location / {
		autoindex on;
		try_files $uri $uri/ =404;
	}
  
	location ~ \.php$ {
	  fastcgi_pass unix:/run/php/php7.3-fpm.sock;
	  include snippets/fastcgi-php.conf;
	}

	# disable access to hidden files
	location ~ /\.ht {
		access_log off;
		log_not_found off;
		deny all;
	}

	error_page 403 https://localhost/wordpress;
}


#    # A long browser cache lifetime can speed up repeat visits to your page
# 	location ~* \.(jpg|jpeg|gif|png|webp|svg|woff|woff2|ttf|css|js|ico|xml)$ {
# 		 access_log        off;
# 		 log_not_found     off;
# 		 expires           360d;
# 	}